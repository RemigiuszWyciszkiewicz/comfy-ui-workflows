{"id":"0ea60407-51dd-45d3-beee-e521d458e789","revision":0,"last_node_id":38,"last_link_id":47,"nodes":[{"id":4,"type":"CheckpointLoaderSimple","pos":[2650.870361328125,710.8360595703125],"size":[315,98],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[8]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[3,4,7]},{"localized_name":"VAE","name":"VAE","type":"VAE","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["sd_xl_refiner_1.0.safetensors"]},{"id":3,"type":"VAELoader","pos":[2656.0537109375,576.0673217773438],"size":[315,58],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","links":[9]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"VAELoader"},"widgets_values":["sdxl_vae.safetensors"]},{"id":5,"type":"CLIPTextEncodeSDXL","pos":[3118.4140625,704.6160888671875],"size":[400,286],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":2}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[11]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"CLIPTextEncodeSDXL"},"widgets_values":[1024,1024,0,0,1024,1024,"",""]},{"id":7,"type":"CLIPTextEncodeSDXLRefiner","pos":[3134.65771484375,1071.549560546875],"size":[400,200],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":3}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[12]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"CLIPTextEncodeSDXLRefiner"},"widgets_values":[6,1024,1024,""]},{"id":8,"type":"CLIPTextEncodeSDXLRefiner","pos":[3144.69287109375,1351.2786865234375],"size":[400,200],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":4}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[13]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"CLIPTextEncodeSDXLRefiner"},"widgets_values":[6,1024,1024,""]},{"id":12,"type":"SAMLoader","pos":[3685.893310546875,957.0908813476562],"size":[315,82],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"localized_name":"SAM_MODEL","name":"SAM_MODEL","type":"SAM_MODEL","links":[15]}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"0b1ac0f1c5a395e17065821e4fd47aba3bf23900","Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_b_01ec64.pth","AUTO"]},{"id":11,"type":"UltralyticsDetectorProvider","pos":[3677.500732421875,818.219970703125],"size":[340.20001220703125,78],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"localized_name":"BBOX_DETECTOR","name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[14]},{"localized_name":"SEGM_DETECTOR","name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":null}],"properties":{"cnr_id":"comfyui-impact-subpack","ver":"74db20c95eca152a6d686c914edc0ef4e4762cb8","Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/face_yolov8m.pt"]},{"id":13,"type":"UltralyticsDetectorProvider","pos":[3663.969970703125,1100.0013427734375],"size":[340.20001220703125,78],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"localized_name":"BBOX_DETECTOR","name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":null},{"localized_name":"SEGM_DETECTOR","name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":[16]}],"properties":{"cnr_id":"comfyui-impact-subpack","ver":"74db20c95eca152a6d686c914edc0ef4e4762cb8","Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["segm/face_yolov8n-seg2_60.pt"]},{"id":18,"type":"MaskToImage","pos":[5205.02978515625,1009.649658203125],"size":[264.5999755859375,26],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":23}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[22]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"MaskToImage"},"widgets_values":[]},{"id":19,"type":"PreviewImage","pos":[5611.70703125,1017.417236328125],"size":[210,246],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":22}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":15,"type":"PreviewImage","pos":[5347.20166015625,622.3426513671875],"size":[210,246],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":19}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":9,"type":"ToDetailerPipeSDXL","pos":[4148.8564453125,716.712158203125],"size":[400,376],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":5},{"localized_name":"clip","name":"clip","type":"CLIP","link":6},{"localized_name":"vae","name":"vae","type":"VAE","link":9},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":30},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":11},{"localized_name":"refiner_model","name":"refiner_model","type":"MODEL","link":8},{"localized_name":"refiner_clip","name":"refiner_clip","type":"CLIP","link":7},{"localized_name":"refiner_positive","name":"refiner_positive","type":"CONDITIONING","link":12},{"localized_name":"refiner_negative","name":"refiner_negative","type":"CONDITIONING","link":13},{"localized_name":"bbox_detector","name":"bbox_detector","type":"BBOX_DETECTOR","link":14},{"localized_name":"sam_model_opt","name":"sam_model_opt","shape":7,"type":"SAM_MODEL","link":15},{"localized_name":"segm_detector_opt","name":"segm_detector_opt","shape":7,"type":"SEGM_DETECTOR","link":16},{"localized_name":"detailer_hook","name":"detailer_hook","shape":7,"type":"DETAILER_HOOK","link":null}],"outputs":[{"localized_name":"detailer_pipe","name":"detailer_pipe","type":"DETAILER_PIPE","links":[17]}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"0b1ac0f1c5a395e17065821e4fd47aba3bf23900","Node name for S&R":"ToDetailerPipeSDXL"},"widgets_values":["","Select the LoRA to add to the text","Select the Wildcard to add to the text"]},{"id":1,"type":"LoadImage","pos":[2289.4052734375,445.45672607421875],"size":[315,314],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[18,24,26]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_temp_ngddz_00041_.png","image"]},{"id":21,"type":"BLIP Model Loader","pos":[2237.869140625,50.72412872314453],"size":[315,106],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"localized_name":"BLIP_MODEL","name":"BLIP_MODEL","type":"BLIP_MODEL","links":[25]}],"properties":{"cnr_id":"was-node-suite-comfyui","ver":"1014f8a1477b8ae0144e16ed4fd6476cd109fb23","Node name for S&R":"BLIP Model Loader"},"widgets_values":["Salesforce/blip-image-captioning-base","Salesforce/blip-vqa-base","cuda"]},{"id":22,"type":"BLIP Analyze Image","pos":[2743.77978515625,19.70550537109375],"size":[400,252],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":26},{"localized_name":"blip_model","name":"blip_model","type":"BLIP_MODEL","link":25}],"outputs":[{"localized_name":"FULL_CAPTIONS","name":"FULL_CAPTIONS","type":"STRING","links":[27]},{"localized_name":"CAPTIONS","name":"CAPTIONS","shape":6,"type":"STRING","links":null}],"properties":{"cnr_id":"was-node-suite-comfyui","ver":"1014f8a1477b8ae0144e16ed4fd6476cd109fb23","Node name for S&R":"BLIP Analyze Image"},"widgets_values":["caption","What does the background consist of?",24,64,5,3,false]},{"id":2,"type":"CheckpointLoaderSimple","pos":[2652.434814453125,414.8837585449219],"size":[315,98],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[5]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[2,6,29]},{"localized_name":"VAE","name":"VAE","type":"VAE","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["sd_xl_base_1.0.safetensors"]},{"id":25,"type":"Text to Conditioning","pos":[3634.0322265625,289.70855712890625],"size":[315,58],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":29},{"name":"text","type":"STRING","widget":{"name":"text"},"link":28}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[30]}],"properties":{"cnr_id":"was-node-suite-comfyui","ver":"1014f8a1477b8ae0144e16ed4fd6476cd109fb23","Node name for S&R":"Text to Conditioning"},"widgets_values":[""]},{"id":23,"type":"ShowText|pysssss","pos":[3260.815185546875,133.87203979492188],"size":[315,112],"flags":{},"order":17,"mode":0,"inputs":[{"name":"text","type":"STRING","widget":{"name":"text"},"link":27}],"outputs":[{"localized_name":"STRING","name":"STRING","shape":6,"type":"STRING","links":[28]}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"9f7b3215e6af317603056a9a1666bf6e83e28835","Node name for S&R":"ShowText|pysssss"},"widgets_values":["","a woman laying on a bench with a hat on top of her head and a white hat on her head on the bench\n\n"]},{"id":20,"type":"PreviewImage","pos":[5446.82421875,269.0090637207031],"size":[210,246],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":24}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":26,"type":"PreviewImage","pos":[5674.04248046875,274.71240234375],"size":[210,246],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":31}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":17,"type":"PreviewImage","pos":[5657.81103515625,594.7755126953125],"size":[210,246],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":21}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":30,"type":"CLIPTextEncode","pos":[5016.017578125,1913.70361328125],"size":[400,200],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":33}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[35]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":28,"type":"VAELoader","pos":[4587.83984375,1784.2733154296875],"size":[315,58],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"VAELoader"},"widgets_values":["ae.safetensors"]},{"id":27,"type":"CheckpointLoaderSimple","pos":[4593.6923828125,1611.2874755859375],"size":[315,98],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[39]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[32,33]},{"localized_name":"VAE","name":"VAE","type":"VAE","links":[38]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["Juggernaut-XL_v9_RunDiffusionPhoto_v2.safetensors"]},{"id":29,"type":"CLIPTextEncode","pos":[5033.1123046875,1587.2779541015625],"size":[400,200],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":32}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[34]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":32,"type":"MaskToImage","pos":[6724.5517578125,2056.498291015625],"size":[264.5999755859375,26],"flags":{},"order":31,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":41}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[42]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"MaskToImage"},"widgets_values":[]},{"id":33,"type":"PreviewImage","pos":[7131.22900390625,2064.265869140625],"size":[210,246],"flags":{},"order":32,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":42}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":34,"type":"PreviewImage","pos":[6866.7236328125,1669.1912841796875],"size":[210,246],"flags":{},"order":29,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":43}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":36,"type":"PreviewImage","pos":[7193.564453125,1321.5609130859375],"size":[210,246],"flags":{},"order":28,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":44}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":37,"type":"PreviewImage","pos":[7177.3330078125,1641.6241455078125],"size":[210,246],"flags":{},"order":30,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":45}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":31,"type":"EditDetailerPipe","pos":[5558.97412109375,1683.3333740234375],"size":[400,316],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"detailer_pipe","name":"detailer_pipe","type":"DETAILER_PIPE","link":40},{"localized_name":"model","name":"model","shape":7,"type":"MODEL","link":39},{"localized_name":"clip","name":"clip","shape":7,"type":"CLIP","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":38},{"localized_name":"positive","name":"positive","shape":7,"type":"CONDITIONING","link":34},{"localized_name":"negative","name":"negative","shape":7,"type":"CONDITIONING","link":35},{"localized_name":"bbox_detector","name":"bbox_detector","shape":7,"type":"BBOX_DETECTOR","link":null},{"localized_name":"sam_model","name":"sam_model","shape":7,"type":"SAM_MODEL","link":null},{"localized_name":"segm_detector","name":"segm_detector","shape":7,"type":"SEGM_DETECTOR","link":null},{"localized_name":"detailer_hook","name":"detailer_hook","shape":7,"type":"DETAILER_HOOK","link":null}],"outputs":[{"localized_name":"detailer_pipe","name":"detailer_pipe","type":"DETAILER_PIPE","links":[46]}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"0b1ac0f1c5a395e17065821e4fd47aba3bf23900","Node name for S&R":"EditDetailerPipe"},"widgets_values":["","Select the LoRA to add to the text","Select the Wildcard to add to the text"]},{"id":38,"type":"FaceDetailerPipe","pos":[6156.86376953125,1675.5264892578125],"size":[519,830],"flags":{},"order":27,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":47},{"localized_name":"detailer_pipe","name":"detailer_pipe","type":"DETAILER_PIPE","link":46},{"localized_name":"scheduler_func_opt","name":"scheduler_func_opt","shape":7,"type":"SCHEDULER_FUNC","link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[44]},{"localized_name":"cropped_refined","name":"cropped_refined","shape":6,"type":"IMAGE","links":[43]},{"localized_name":"cropped_enhanced_alpha","name":"cropped_enhanced_alpha","shape":6,"type":"IMAGE","links":[45]},{"localized_name":"mask","name":"mask","type":"MASK","links":[41]},{"localized_name":"detailer_pipe","name":"detailer_pipe","type":"DETAILER_PIPE","links":[]},{"localized_name":"cnet_images","name":"cnet_images","shape":6,"type":"IMAGE","links":null}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"0b1ac0f1c5a395e17065821e4fd47aba3bf23900","Node name for S&R":"FaceDetailerPipe"},"widgets_values":[768,true,768,454497956741381,"randomize",30,8,"euler","normal",0.5,5,true,true,0.5000000000000001,10,3,"center-1",0,0.93,0,0.7,"False",10,0.2,1,false,20,false,false]},{"id":14,"type":"FaceDetailerPipe","pos":[4637.341796875,628.6776733398438],"size":[519,830],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":18},{"localized_name":"detailer_pipe","name":"detailer_pipe","type":"DETAILER_PIPE","link":17},{"localized_name":"scheduler_func_opt","name":"scheduler_func_opt","shape":7,"type":"SCHEDULER_FUNC","link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[31,47]},{"localized_name":"cropped_refined","name":"cropped_refined","shape":6,"type":"IMAGE","links":[19]},{"localized_name":"cropped_enhanced_alpha","name":"cropped_enhanced_alpha","shape":6,"type":"IMAGE","links":[21]},{"localized_name":"mask","name":"mask","type":"MASK","links":[23]},{"localized_name":"detailer_pipe","name":"detailer_pipe","type":"DETAILER_PIPE","links":[40]},{"localized_name":"cnet_images","name":"cnet_images","shape":6,"type":"IMAGE","links":null}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"0b1ac0f1c5a395e17065821e4fd47aba3bf23900","Node name for S&R":"FaceDetailerPipe"},"widgets_values":[768,true,768,651026374057207,"randomize",30,8,"euler","normal",0.5,5,true,true,0.5000000000000001,10,3,"center-1",0,0.9400000000000002,0,0.7,"False",10,0.2,1,false,20,false,false]}],"links":[[2,2,1,5,0,"CLIP"],[3,4,1,7,0,"CLIP"],[4,4,1,8,0,"CLIP"],[5,2,0,9,0,"MODEL"],[6,2,1,9,1,"CLIP"],[7,4,1,9,6,"CLIP"],[8,4,0,9,5,"MODEL"],[9,3,0,9,2,"VAE"],[11,5,0,9,4,"CONDITIONING"],[12,7,0,9,7,"CONDITIONING"],[13,8,0,9,8,"CONDITIONING"],[14,11,0,9,9,"BBOX_DETECTOR"],[15,12,0,9,10,"SAM_MODEL"],[16,13,1,9,11,"SEGM_DETECTOR"],[17,9,0,14,1,"DETAILER_PIPE"],[18,1,0,14,0,"IMAGE"],[19,14,1,15,0,"IMAGE"],[21,14,2,17,0,"IMAGE"],[22,18,0,19,0,"IMAGE"],[23,14,3,18,0,"MASK"],[24,1,0,20,0,"IMAGE"],[25,21,0,22,1,"BLIP_MODEL"],[26,1,0,22,0,"IMAGE"],[27,22,0,23,0,"STRING"],[28,23,0,25,1,"STRING"],[29,2,1,25,0,"CLIP"],[30,25,0,9,3,"CONDITIONING"],[31,14,0,26,0,"IMAGE"],[32,27,1,29,0,"CLIP"],[33,27,1,30,0,"CLIP"],[34,29,0,31,4,"CONDITIONING"],[35,30,0,31,5,"CONDITIONING"],[38,27,2,31,3,"VAE"],[39,27,0,31,1,"MODEL"],[40,14,4,31,0,"DETAILER_PIPE"],[41,38,3,32,0,"MASK"],[42,32,0,33,0,"IMAGE"],[43,38,1,34,0,"IMAGE"],[44,38,0,36,0,"IMAGE"],[45,38,2,37,0,"IMAGE"],[46,31,0,38,1,"DETAILER_PIPE"],[47,14,0,38,0,"IMAGE"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.45,"offset":[-2123.5084635416665,19.655659993489508]}},"version":0.4}