{"id":"43f1e754-3381-4237-9129-fa9af30843e6","revision":0,"last_node_id":273,"last_link_id":923,"nodes":[{"id":211,"type":"PreviewImage","pos":[930.35888671875,1435.5743408203125],"size":[574.4244384765625,405.50177001953125],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":710}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":7,"type":"CLIPTextEncode","pos":[1823.4544677734375,485.6363830566406],"size":[463.3685302734375,224.99427795410156],"flags":{"collapsed":false},"order":13,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":5}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[879]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"CLIPTextEncode"},"widgets_values":["text, watermark"],"color":"#322","bgcolor":"#533"},{"id":267,"type":"Note","pos":[104,1176],"size":[272.4263916015625,88],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["IF USE OUTPAINTING, UPDATE THE MASK REROUTE\nELSE BYPASS INVERT IF USING NORMALLY"],"color":"#432","bgcolor":"#653"},{"id":270,"type":"Note","pos":[565,1123],"size":[340.8451843261719,230.0647735595703],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["Inpaint Model:\nLAMA / MAT, good for object removal / outpainting\nset denoise < 1\n\nFill Masked Area:\nNeutral, fills with grey, good for adding new content\nTelea / NavierStrokes, fills with colors from surrounding border\n\nBlur Masked Area:\nBlurs the image in the masked area. The blur is less strong at the borders of the mask. Good for keeping the general colors the same.\n\nOriginal Image:\nCan use for refining, set denoise < 1"],"color":"#432","bgcolor":"#653"},{"id":266,"type":"Note","pos":[1565.39111328125,1189.7093505859375],"size":[210,88],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["PUT SELECTED IMAGE HERE"],"color":"#432","bgcolor":"#653"},{"id":184,"type":"IPAdapterModelLoader","pos":[2518.106689453125,-275.5536804199219],"size":[315,58],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"localized_name":"IPADAPTER","name":"IPADAPTER","shape":3,"type":"IPADAPTER","slot_index":0,"links":[895]}],"properties":{"cnr_id":"comfyui_ipadapter_plus","ver":"9d076a3df0d2763cef5510ec5ab807f6632c39f5","Node name for S&R":"IPAdapterModelLoader"},"widgets_values":["ip-adapter-plus_sdxl_vit-h.safetensors"]},{"id":120,"type":"INPAINT_LoadInpaintModel","pos":[196.086181640625,476.3926086425781],"size":[289.33074951171875,58.71503829956055],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"localized_name":"INPAINT_MODEL","name":"INPAINT_MODEL","shape":3,"type":"INPAINT_MODEL","slot_index":0,"links":[227]}],"properties":{"cnr_id":"comfyui-inpaint-nodes","ver":"b9039c22de926919f26b7242cfa4da00d8b6fbec","Node name for S&R":"INPAINT_LoadInpaintModel"},"widgets_values":["big-lama.pt"]},{"id":6,"type":"CLIPTextEncode","pos":[1828.4544677734375,216.63636779785156],"size":[459.1585388183594,209.53427124023438],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":3}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[878]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"CLIPTextEncode"},"widgets_values":["brick wall"],"color":"#232","bgcolor":"#353"},{"id":48,"type":"LoadImage","pos":[-496.3660888671875,632.3309936523438],"size":[384.6595764160156,499.6029052734375],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","shape":3,"type":"IMAGE","slot_index":0,"links":[727,897]},{"localized_name":"MASK","name":"MASK","shape":3,"type":"MASK","slot_index":1,"links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"LoadImage"},"widgets_values":["v7 comsposite mask.png","image"]},{"id":135,"type":"PreviewImage","pos":[926.35888671875,961.5744018554688],"size":[574.4244384765625,405.50177001953125],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":698}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":128,"type":"INPAINT_MaskedBlur","pos":[592.35888671875,1454.5743408203125],"size":[297.33074951171875,102],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":893},{"localized_name":"mask","name":"mask","type":"MASK","link":912}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","shape":3,"type":"IMAGE","slot_index":0,"links":[710]}],"properties":{"cnr_id":"comfyui-inpaint-nodes","ver":"b9039c22de926919f26b7242cfa4da00d8b6fbec","Node name for S&R":"INPAINT_MaskedBlur"},"widgets_values":[35,0]},{"id":269,"type":"Note","pos":[3246.505859375,1228.59375],"size":[290.8388366699219,88],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["Do not use for adding objects, will have seams."],"color":"#432","bgcolor":"#653"},{"id":121,"type":"PreviewImage","pos":[922.9388427734375,489.63433837890625],"size":[574.4244384765625,405.50177001953125],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":832}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":264,"type":"InpaintModelConditioning","pos":[2417.547607421875,624.9093627929688],"size":[345.0455322265625,138],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":878},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":879},{"localized_name":"vae","name":"vae","type":"VAE","link":880},{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":881},{"localized_name":"mask","name":"mask","type":"MASK","link":888}],"outputs":[{"localized_name":"positive","name":"positive","shape":3,"type":"CONDITIONING","slot_index":0,"links":[883]},{"localized_name":"negative","name":"negative","shape":3,"type":"CONDITIONING","slot_index":1,"links":[884]},{"localized_name":"latent","name":"latent","shape":3,"type":"LATENT","slot_index":2,"links":[914,919]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"InpaintModelConditioning"},"widgets_values":[true]},{"id":265,"type":"Reroute","pos":[1870.1348876953125,1009.4262084960938],"size":[75,26],"flags":{},"order":18,"mode":0,"inputs":[{"name":"","type":"*","link":920}],"outputs":[{"name":"","type":"MASK","slot_index":0,"links":[887,888,889]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":4,"type":"CheckpointLoaderSimple","pos":[1576.380126953125,754.49951171875],"size":[315,98],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[902,908]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":1,"links":[3,5]},{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":2,"links":[259,826,880]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["Juggernaut-XL_v9_RunDiffusionPhoto_v2.safetensors"]},{"id":253,"type":"VAEEncodeForInpaint","pos":[2370.4208984375,417.7851257324219],"size":[344.5096435546875,98],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":825},{"localized_name":"vae","name":"vae","type":"VAE","link":826},{"localized_name":"mask","name":"mask","type":"MASK","link":889}],"outputs":[{"localized_name":"LATENT","name":"LATENT","shape":3,"type":"LATENT","slot_index":0,"links":[921]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"VAEEncodeForInpaint"},"widgets_values":[20]},{"id":142,"type":"Reroute","pos":[1662.7108154296875,918.082275390625],"size":[75,26],"flags":{},"order":23,"mode":0,"inputs":[{"name":"","type":"*","link":923}],"outputs":[{"name":"","type":"IMAGE","slot_index":0,"links":[603,825,881]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":108,"type":"INPAINT_LoadFooocusInpaint","pos":[2412.47607421875,260.5908203125],"size":[338.48370361328125,88.90575408935547],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[{"localized_name":"INPAINT_PATCH","name":"INPAINT_PATCH","shape":3,"type":"INPAINT_PATCH","links":[208]}],"properties":{"cnr_id":"comfyui-inpaint-nodes","ver":"b9039c22de926919f26b7242cfa4da00d8b6fbec","Node name for S&R":"INPAINT_LoadFooocusInpaint"},"widgets_values":["fooocus_inpaint_head.pth","inpaint_v26.fooocus.patch"]},{"id":185,"type":"CLIPVisionLoader","pos":[2518.4384765625,-117.63079071044922],"size":[315,58],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","shape":3,"type":"CLIP_VISION","slot_index":0,"links":[896]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"CLIPVisionLoader"},"widgets_values":["CLIP-ViT-H-14-laion2B-s32B-b79K.safetensors"]},{"id":272,"type":"IPAdapterTiled","pos":[2867.40625,-304.2425842285156],"size":[315,302],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":908},{"localized_name":"ipadapter","name":"ipadapter","type":"IPADAPTER","link":895},{"localized_name":"image","name":"image","type":"IMAGE","link":897},{"localized_name":"image_negative","name":"image_negative","shape":7,"type":"IMAGE","link":null},{"localized_name":"attn_mask","name":"attn_mask","shape":7,"type":"MASK","link":null},{"localized_name":"clip_vision","name":"clip_vision","shape":7,"type":"CLIP_VISION","link":896}],"outputs":[{"localized_name":"MODEL","name":"MODEL","shape":3,"type":"MODEL","slot_index":0,"links":[909]},{"localized_name":"tiles","name":"tiles","shape":3,"type":"IMAGE","slot_index":1,"links":[915]},{"localized_name":"masks","name":"masks","shape":3,"type":"MASK","links":null}],"properties":{"cnr_id":"comfyui_ipadapter_plus","ver":"9d076a3df0d2763cef5510ec5ab807f6632c39f5","Node name for S&R":"IPAdapterTiled"},"widgets_values":[1,"linear","concat",0,1,0,"V only"]},{"id":273,"type":"PreviewImage","pos":[3259.4501953125,-288.50665283203125],"size":[210,246],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":915}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":125,"type":"INPAINT_MaskedFill","pos":[541.283447265625,946.1331787109375],"size":[304.50762939453125,102],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":892},{"localized_name":"mask","name":"mask","type":"MASK","link":910}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","shape":3,"type":"IMAGE","slot_index":0,"links":[698]}],"properties":{"cnr_id":"comfyui-inpaint-nodes","ver":"b9039c22de926919f26b7242cfa4da00d8b6fbec","Node name for S&R":"INPAINT_MaskedFill"},"widgets_values":["neutral",0]},{"id":182,"type":"ImagePadForOutpaint","pos":[-24.92005157470703,816.8883056640625],"size":[315,174],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":727}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","shape":3,"type":"IMAGE","slot_index":0,"links":[891,892,893]},{"localized_name":"MASK","name":"MASK","shape":3,"type":"MASK","slot_index":1,"links":[910,912,913,920]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"ImagePadForOutpaint"},"widgets_values":[272,0,0,0,40]},{"id":119,"type":"INPAINT_InpaintWithModel","pos":[576.7217407226562,535.1190795898438],"size":[290.6512451171875,142],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"inpaint_model","name":"inpaint_model","type":"INPAINT_MODEL","link":227},{"localized_name":"image","name":"image","type":"IMAGE","link":891},{"localized_name":"mask","name":"mask","type":"MASK","link":913},{"localized_name":"optional_upscale_model","name":"optional_upscale_model","shape":7,"type":"UPSCALE_MODEL","link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","shape":3,"type":"IMAGE","slot_index":0,"links":[832,923]}],"properties":{"cnr_id":"comfyui-inpaint-nodes","ver":"b9039c22de926919f26b7242cfa4da00d8b6fbec","Node name for S&R":"INPAINT_InpaintWithModel"},"widgets_values":[894884229454921,"randomize"]},{"id":131,"type":"VAEDecode","pos":[3311.7890625,225.05406188964844],"size":[210,46],"flags":{},"order":28,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":253},{"localized_name":"vae","name":"vae","type":"VAE","link":259}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[602,854]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":134,"type":"PreviewImage","pos":[3611.746826171875,217.7415313720703],"size":[553.3995361328125,503.498046875],"flags":{},"order":30,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":854}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":260,"type":"PreviewImage","pos":[3605.675048828125,819.6365966796875],"size":[570.2731323242188,548.2366943359375],"flags":{},"order":31,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":860}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":107,"type":"INPAINT_ApplyFooocusInpaint","pos":[2790.11572265625,354.7557067871094],"size":[210,66],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":909},{"localized_name":"patch","name":"patch","type":"INPAINT_PATCH","link":208},{"localized_name":"latent","name":"latent","type":"LATENT","link":921}],"outputs":[{"localized_name":"MODEL","name":"MODEL","shape":3,"type":"MODEL","slot_index":0,"links":[256]}],"properties":{"cnr_id":"comfyui-inpaint-nodes","ver":"b9039c22de926919f26b7242cfa4da00d8b6fbec","Node name for S&R":"INPAINT_ApplyFooocusInpaint"},"widgets_values":[]},{"id":181,"type":"ImageCompositeMasked","pos":[3295.646728515625,929.9310913085938],"size":[242.0758819580078,146],"flags":{},"order":29,"mode":0,"inputs":[{"localized_name":"destination","name":"destination","type":"IMAGE","link":603},{"localized_name":"source","name":"source","type":"IMAGE","link":602},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":887}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","shape":3,"type":"IMAGE","slot_index":0,"links":[860]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"ImageCompositeMasked"},"widgets_values":[0,0,false]},{"id":268,"type":"Note","pos":[2359.5390625,861.2964477539062],"size":[443.05224609375,171.97271728515625],"flags":{},"order":10,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["VAE Encode (for Inpainting)\n- for adding / replacing objects, set both latents to this node\n- increase grow_mask_by to remove seams\n- do not confuse grow_mask_by with GrowMask, they use different algorithms.\n- denoise = 1.0\n\n\nInpaintModelConditioning\n- for removing objects / outpainting, set this latent to Ksampler and VAE encode's latent to Apply Fooocus Inpaint\n- use with preprocessing\n- denoise < 1.0"],"color":"#432","bgcolor":"#653"},{"id":130,"type":"KSampler","pos":[3040.935546875,353.7460021972656],"size":[315,474],"flags":{},"order":27,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":256},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":883},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":884},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":919}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[253]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"KSampler"},"widgets_values":[140258381028277,"randomize",28,5,"dpmpp_2m","karras",0.7500000000000001]}],"links":[[3,4,1,6,0,"CLIP"],[5,4,1,7,0,"CLIP"],[208,108,0,107,1,"INPAINT_PATCH"],[227,120,0,119,0,"INPAINT_MODEL"],[253,130,0,131,0,"LATENT"],[256,107,0,130,0,"MODEL"],[259,4,2,131,1,"VAE"],[602,131,0,181,1,"IMAGE"],[603,142,0,181,0,"IMAGE"],[698,125,0,135,0,"IMAGE"],[710,128,0,211,0,"IMAGE"],[727,48,0,182,0,"IMAGE"],[825,142,0,253,0,"IMAGE"],[826,4,2,253,1,"VAE"],[832,119,0,121,0,"IMAGE"],[854,131,0,134,0,"IMAGE"],[860,181,0,260,0,"IMAGE"],[878,6,0,264,0,"CONDITIONING"],[879,7,0,264,1,"CONDITIONING"],[880,4,2,264,2,"VAE"],[881,142,0,264,3,"IMAGE"],[883,264,0,130,1,"CONDITIONING"],[884,264,1,130,2,"CONDITIONING"],[887,265,0,181,2,"MASK"],[888,265,0,264,4,"MASK"],[889,265,0,253,2,"MASK"],[891,182,0,119,1,"IMAGE"],[892,182,0,125,0,"IMAGE"],[893,182,0,128,0,"IMAGE"],[895,184,0,272,1,"IPADAPTER"],[896,185,0,272,5,"CLIP_VISION"],[897,48,0,272,2,"IMAGE"],[908,4,0,272,0,"MODEL"],[909,272,0,107,0,"MODEL"],[910,182,1,125,1,"MASK"],[912,182,1,128,1,"MASK"],[913,182,1,119,2,"MASK"],[915,272,1,273,0,"IMAGE"],[919,264,2,130,3,"LATENT"],[920,182,1,265,0,"*"],[921,253,0,107,2,"LATENT"],[923,119,0,142,0,"*"]],"groups":[{"id":1,"title":"FOOOCUS INPAINTING","bounding":[1769.4544677734375,129.63636779785156,2429,1267],"color":"#a1309b","font_size":24,"flags":{}},{"id":2,"title":"IMAGE PREPROCESSING","bounding":[551,432,976,1445],"color":"#8A8","font_size":24,"flags":{}},{"id":3,"title":"IPADAPTER (GOOD FOR OUTPAINTING)","bounding":[2506.613037109375,-377.4009094238281,705,403],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1.464100000000001,"offset":[-2440.0782982425694,-569.0221397280469]}},"version":0.4}